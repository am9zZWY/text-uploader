<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="utf-8" />
    <title>Text Uploader by jpkmiller</title>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
        function uploadText(text) {
            const response = document.getElementById('response-hash')
            const responseWithURL = document.getElementById('response-hash-with-url')
            const URL = '/upload/' + text;
            axios({
                method: 'post',
                url: URL
            })
                .then(data => {
                    response.value = data.data
                    const getUrl = window.location;
                    responseWithURL.value = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split('/')[1] + 'request/' + data.data
                })
                .catch(err => console.error(err))
        }

        function inputText() {
            const text = document.getElementById('text').value;
            uploadText(text)
        }

        function uploadHash(hash) {
            const response = document.getElementById('response-text')
            const URL = '/request/' + hash
            axios({
                method: 'get',
                url: URL
            })
                .then(data => {
                    response.value = data.data
                })
                .catch(err => console.log(err))
        }

        function inputHash() {
            const hash = document.getElementById('hash').value;
            uploadHash(hash)
        }

        function copy(element) {
            const copyText = document.getElementById(element);
            copyText.select();
            copyText.setSelectionRange(0, 99999)
            document.execCommand("copy");
        }

        function clearAllInputs() {
            const inputs = document.querySelectorAll('input, textarea')
            for (let i = 0; i < inputs.length; i++) {
                inputs[i].value = ''
                inputs[i].innerText = ''
            }
        }
    </script>
</head>

<body>
    <h1 id="title">Text Uploader by
        <a href="https://github.com/jpkmiller" target="_blank" rel="noopener">jpkmiller</a>
    </h1>
    <h2 id="text-info">Texts are deleted after 24 hours. After uploading the text you receive a hash.</h2>
    <h2>Please do not upload any sensible information.</h2>
    
    <label for="text">Input Text</label>
    <textarea id="text"></textarea>
    <button onclick="inputText()">Upload Text</button>
    
    <br>
    <br>

    <label for="response-hash">Response Hash</label>
    <input type="text" id="response-hash" readonly="readonly">
    <button onclick="copy('response-hash')">Copy Hash</button>

    <br>
    <br>

    <label for="response-hash-with-url">Response URL</label>
    <input type="text" id="response-hash-with-url" readonly="readonly">
    <button onclick="copy('response-hash-with-url')">Copy URL</button>

    <br>
    <br>
    <br>

    <label for="hash">Input Hash</label>
    <input type="text" id="hash">
    <button onclick="inputHash()">Upload Hash</button>

    <br>
    <br>

    <label for="response-text">Response Text</label>
    <textarea type="text" id="response-text" readonly="readonly"></textarea>
    <button onclick="copy('response-text')">Copy Text</button>

    <br>
    <br>
    <br>

    <button onclick="clearAllInputs()">Clear All</button>

    <noscript>
        It seems that JavaScript is currently deactivated. Some functions might not be usable!
    </noscript>
</body>

</html>